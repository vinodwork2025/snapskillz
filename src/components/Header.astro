---
// Header component with glass morphism navigation and design system styling
import DesignSystem from './DesignSystem.astro';
---

<DesignSystem />

<header class="header-light fixed top-0 left-0 right-0 z-50 transition-all duration-300 ease-in-out bg-slate-900/95 backdrop-blur-xl border-b border-white/10" id="header">
  <nav class="container-xl container-padding py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <div class="flex items-center space-x-3">
        <img 
          src="/logo.png" 
          alt="SnapSkillz Logo" 
          class="w-10 h-10 rounded-xl shadow-colorful hover-scale transition-transform duration-200"
        />
        <a href="/" class="text-xl font-bold bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 bg-clip-text text-transparent hover-scale transition-transform duration-200">
          SnapSkillz
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center space-x-8">
        <a href="/" class="text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:scale-105">
          Home
        </a>
        <a href="/features" class="text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:scale-105">
          Features
        </a>
        <a href="/about" class="text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:scale-105">
          About
        </a>
        <a href="/pricing" class="text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:scale-105">
          Pricing
        </a>
        <a href="/blog" class="text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:scale-105">
          Blog
        </a>
        <div class="flex items-center space-x-4">
          <!-- Theme Toggle Button -->
          <button 
            id="theme-toggle"
            class="p-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 hover:scale-110 transition-all duration-300 group"
            aria-label="Toggle theme"
          >
            <!-- Sun Icon (Light Mode) -->
            <svg class="w-5 h-5 sun-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
            </svg>
            <!-- Moon Icon (Dark Mode) -->
            <svg class="w-5 h-5 moon-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
            </svg>
          </button>
          
          <a href="/contact" class="px-4 py-2 text-gray-300 hover:text-white border border-white/20 rounded-xl hover:bg-white/10 transition-all duration-200">
            Contact
          </a>
          <a href="/quiz" class="px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-blue-500/25 hover:scale-105 transition-all duration-200">
            Start Learning
          </a>
        </div>
      </div>

      <!-- Mobile Menu Button -->
      <div class="lg:hidden flex items-center space-x-3">
        <!-- Mobile Theme Toggle -->
        <button 
          id="mobile-theme-toggle"
          class="p-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 text-white hover:bg-white/20 transition-all duration-300"
          aria-label="Toggle theme"
        >
          <svg class="w-5 h-5 mobile-sun-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
          </svg>
          <svg class="w-5 h-5 mobile-moon-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
          </svg>
        </button>
        
        <button 
          class="p-2 text-gray-300 hover:text-cyan-400 transition-colors duration-200 hover:scale-110"
          id="mobile-menu-button"
          aria-label="Open mobile menu"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Mobile Menu Overlay -->
  <div 
    class="lg:hidden fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm transition-opacity duration-300 opacity-0 pointer-events-none z-40"
    id="mobile-menu-overlay"
  ></div>

  <!-- Mobile Menu -->
  <div 
    class="mobile-menu-light lg:hidden fixed top-0 right-0 h-full w-80 bg-slate-900/95 backdrop-blur-xl shadow-2xl border-l border-white/10 transform translate-x-full transition-transform duration-300 z-50"
    id="mobile-menu"
  >
    <div class="p-6">
      <!-- Close Button -->
      <button 
        class="absolute top-4 right-4 p-2 text-gray-300 hover:text-white hover:scale-110 transition-all duration-200"
        id="mobile-menu-close"
        aria-label="Close mobile menu"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>

      <!-- Mobile Navigation Links -->
      <div class="mt-12 space-y-6">
        <a href="/" class="block text-lg text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:translate-x-2">
          Home
        </a>
        <a href="/features" class="block text-lg text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:translate-x-2">
          Features
        </a>
        <a href="/about" class="block text-lg text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:translate-x-2">
          About
        </a>
        <a href="/pricing" class="block text-lg text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:translate-x-2">
          Pricing
        </a>
        <a href="/blog" class="block text-lg text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:translate-x-2">
          Blog
        </a>
        <a href="/contact" class="block text-lg text-gray-300 hover:text-cyan-400 transition-all duration-200 font-medium hover:translate-x-2">
          Contact
        </a>
        
        <!-- Mobile CTA Buttons -->
        <div class="pt-6 space-y-4">
          <a href="/quiz" class="flex items-center justify-center w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all duration-200">
            Start Learning
          </a>
          <a href="/interviews" class="flex items-center justify-center w-full px-6 py-3 border-2 border-white/20 text-gray-300 rounded-xl font-semibold hover:bg-white/10 hover:text-white transition-all duration-200">
            Mock Interview
          </a>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // Theme Management System
  function initThemeSystem() {
    // Get theme from localStorage or default to 'dark'
    const savedTheme = localStorage.getItem('theme') || 'dark';
    const htmlElement = document.documentElement;
    
    // Apply theme
    function applyTheme(theme) {
      htmlElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      
      // Update icon visibility
      const sunIcons = document.querySelectorAll('.sun-icon, .mobile-sun-icon');
      const moonIcons = document.querySelectorAll('.moon-icon, .mobile-moon-icon');
      
      if (theme === 'dark') {
        sunIcons.forEach(icon => icon.classList.remove('hidden'));
        moonIcons.forEach(icon => icon.classList.add('hidden'));
      } else {
        sunIcons.forEach(icon => icon.classList.add('hidden'));
        moonIcons.forEach(icon => icon.classList.remove('hidden'));
      }
      
      // Update body classes for theme switching
      if (theme === 'light') {
        document.body.classList.add('light-theme');
        document.body.classList.remove('dark-theme');
      } else {
        document.body.classList.add('dark-theme');
        document.body.classList.remove('light-theme');
      }
    }
    
    // Toggle theme function
    function toggleTheme() {
      const currentTheme = htmlElement.getAttribute('data-theme') || 'dark';
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      applyTheme(newTheme);
      
      // Animate the transition
      document.body.style.transition = 'background-color 0.3s ease, color 0.3s ease';
      setTimeout(() => {
        document.body.style.transition = '';
      }, 300);
    }
    
    // Set initial theme
    applyTheme(savedTheme);
    
    // Bind toggle buttons
    const themeToggle = document.getElementById('theme-toggle');
    const mobileThemeToggle = document.getElementById('mobile-theme-toggle');
    
    themeToggle?.addEventListener('click', toggleTheme);
    mobileThemeToggle?.addEventListener('click', toggleTheme);
    
    return { applyTheme, toggleTheme };
  }

  // Enhanced header effects
  function updateHeaderOnScroll() {
    const header = document.getElementById('header');
    const nav = header?.querySelector('nav');
    
    if (window.scrollY > 50) {
      header?.classList.add('backdrop-blur-2xl', 'bg-slate-900/98', 'shadow-lg');
      header?.classList.remove('bg-slate-900/95');
    } else {
      header?.classList.remove('backdrop-blur-2xl', 'bg-slate-900/98', 'shadow-lg');
      header?.classList.add('bg-slate-900/95');
    }
  }

  // Mobile menu functionality
  function setupMobileMenu() {
    const menuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuOverlay = document.getElementById('mobile-menu-overlay');
    const closeButton = document.getElementById('mobile-menu-close');

    function openMenu() {
      mobileMenu?.classList.remove('translate-x-full');
      menuOverlay?.classList.remove('opacity-0', 'pointer-events-none');
      document.body.classList.add('overflow-hidden');
      
      // Add stagger animation to mobile links
      const links = mobileMenu?.querySelectorAll('a');
      links?.forEach((link, index) => {
        link.style.opacity = '0';
        link.style.transform = 'translateX(20px)';
        setTimeout(() => {
          link.style.transition = 'all 0.3s ease';
          link.style.opacity = '1';
          link.style.transform = 'translateX(0)';
        }, index * 50);
      });
    }

    function closeMenu() {
      mobileMenu?.classList.add('translate-x-full');
      menuOverlay?.classList.add('opacity-0', 'pointer-events-none');
      document.body.classList.remove('overflow-hidden');
    }

    menuButton?.addEventListener('click', openMenu);
    closeButton?.addEventListener('click', closeMenu);
    menuOverlay?.addEventListener('click', closeMenu);

    // Close menu on link click
    const mobileLinks = mobileMenu?.querySelectorAll('a');
    mobileLinks?.forEach(link => {
      link.addEventListener('click', closeMenu);
    });
  }

  // Initialize everything on page load
  document.addEventListener('DOMContentLoaded', () => {
    initThemeSystem();
    setupMobileMenu();
    updateHeaderOnScroll();
    window.addEventListener('scroll', updateHeaderOnScroll);
  });

  // Expose theme system globally for other components
  window.themeSystem = { initThemeSystem };
</script>

<style>
  .shadow-glass {
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    border: 1px solid rgba(255, 255, 255, 0.18);
    border-radius: 1rem;
  }
</style>